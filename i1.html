<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page avec Boutons et Menu</title>
    <link rel="stylesheet" type="text/css" href="s.css">
</head>
<body>
    <div class="container">
        <h1 class="title">Our S-Deck</h1>
        <div class="Boutons">
            <button class="button" id="button1" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="clic(this.id)">Bouton 1</button>
            <button class="button" id="button2" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="clic(this.id)">Bouton 2</button>
            <button class="button" id="button3" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="clic(this.id)">Bouton 3</button>
            <button class="button" id="button4" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="clic(this.id)">Bouton 4</button>
            <button class="button" id="button5" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="clic(this.id)">Bouton 5</button>
            <button class="button" id="button6" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="clic(this.id)">Bouton 6</button>
        </div>
    </div>
    <div class="menu">
        <h2 class="titleMenu">Menu</h2>
        <div class="containerC">
            <ul>
                <li class="btn">
                    <button id="option1" draggable="true" ondragstart="drag(event)">brightness up</button>
                </li>
                <li class="btn">
                    <button id="option2" draggable="true" ondragstart="drag(event)">brightness down</button>
                </li>
                <li class="btn">
                    <button id="option3" draggable="true" ondragstart="drag(event)">Volume up</button>
                </li>
                <li class="btn">
                    <button id="option4" draggable="true" ondragstart="drag(event)">Volume down</button>
                </li>
                <li class="btn">
                    <button id="option5" draggable="true" ondragstart="drag(event)">App 1</button>
                </li>
                <li class="btn">
                    <button id="option6" draggable="true" ondragstart="drag(event)">App 2</button>
                </li>
                <li class="btn">
                    <button id="option7" draggable="true" ondragstart="drag(event)">App 3</button>
                </li>
                <li class="btn">
                    <button id="option8" draggable="true" ondragstart="drag(event)">App 4</button>
                </li>
                <li class="btn">
                    <button id="option9" draggable="true" ondragstart="drag(event)">App 5</button>
                </li>
                <li class="btn">
                    <button id="option10" draggable="true" ondragstart="drag(event)">App 6</button>
                </li>
            </ul>
            

            <div id="app1List" style="display: none; z-index: 1;position: absolute; max-height: 400px; overflow-y: auto; border: 1px solid #ccc; width: 55%; margin-left: 10px; border-radius: 5px; background-color: #ccc;">
            </div>
        </div>
    </div>
    <script>
        const button1 = document.getElementById("button1");
        const button2 = document.getElementById("button2");
        const button3 = document.getElementById("button3");
        const button4 = document.getElementById("button4");
        const button5 = document.getElementById("button5");
        const button6 = document.getElementById("button6");

        const option1 = document.getElementById("option1");
        const option2 = document.getElementById("option2");
        const option3 = document.getElementById("option3");
        const option4 = document.getElementById("option4");
        const option5 = document.getElementById("option5");
        const option6 = document.getElementById("option6");
        const option7 = document.getElementById("option7");
        const option8 = document.getElementById("option8");
        const option9 = document.getElementById("option9");
        const option10 = document.getElementById("option10");

        
        const app1ListDiv = document.getElementById("app1List");
        const nameList = document.getElementById("nameList");

        var a = 0;

        function allowDrop(event) {
            event.preventDefault();
        }

        function drag(event) {
            event.dataTransfer.setData("text", event.target.innerText);
        }

        function drop(event) {
            event.preventDefault();
            const boutonID = event.dataTransfer.mozSourceNode.id;
            event.target.data = boutonID;
            event.target.textContent = event.dataTransfer.mozSourceNode.textContent;
        }

       option5.addEventListener("click", function () {
            var appList = document.getElementById('app1List');

            if (appList.style.display === 'none') {
                fetch('/get-apps')
                    .then(response => response.json())
                    .then(data => {
                        appList.innerHTML = data.applications.map(app => `<div style="border: 1px solid; width: 550px; height: 15;"> <a href="#" style="font-size: 10px; margin-left: 10px;">${app}</a> </div>`).join('');
                        appList.style.display = 'block';
                        a = 5;
                    })
                    .catch(error => console.error('Error fetching applications:', error));
            } else {
                appList.style.display = 'none';
            }
        });

        option6.addEventListener("click", function () {
            var appList = document.getElementById('app1List');

            if (appList.style.display === 'none') {
                fetch('/get-apps')
                    .then(response => response.json())
                    .then(data => {
                        appList.innerHTML = data.applications.map(app => `<div style="border: 1px solid; width: 550px; height: 15;"> <a href="#" style="font-size: 10px; margin-left: 10px;">${app}</a> </div>`).join('');
                        appList.style.display = 'block';
                        a = 6;
                    })
                    .catch(error => console.error('Error fetching applications:', error));
            } else {
                appList.style.display = 'none';
            }
        });

        option7.addEventListener("click", function () {
            var appList = document.getElementById('app1List');

            if (appList.style.display === 'none') {
                fetch('/get-apps')
                    .then(response => response.json())
                    .then(data => {
                        appList.innerHTML = data.applications.map(app => `<div style="border: 1px solid; width: 550px; height: 15;"> <a href="#" style="font-size: 10px; margin-left: 10px;">${app}</a> </div>`).join('');
                        appList.style.display = 'block';
                        a = 7;
                    })
                    .catch(error => console.error('Error fetching applications:', error));
            } else {
                appList.style.display = 'none';
            }
        });

        option8.addEventListener("click", function () {
            var appList = document.getElementById('app1List');

            if (appList.style.display === 'none') {
                fetch('/get-apps')
                    .then(response => response.json())
                    .then(data => {
                        appList.innerHTML = data.applications.map(app => `<div style="border: 1px solid; width: 550px; height: 15;"> <a href="#" style="font-size: 10px; margin-left: 10px;">${app}</a> </div>`).join('');
                        appList.style.display = 'block';
                        a = 8;
                    })
                    .catch(error => console.error('Error fetching applications:', error));
            } else {
                appList.style.display = 'none';
            }
        });

        option9.addEventListener("click", function () {
            var appList = document.getElementById('app1List');

            if (appList.style.display === 'none') {
                fetch('/get-apps')
                    .then(response => response.json())
                    .then(data => {
                        appList.innerHTML = data.applications.map(app => `<div style="border: 1px solid; width: 550px; height: 15;"> <a href="#" style="font-size: 10px; margin-left: 10px;">${app}</a> </div>`).join('');
                        appList.style.display = 'block';
                        a = 9;
                    })
                    .catch(error => console.error('Error fetching applications:', error));
            } else {
                appList.style.display = 'none';
            }
        });

        option10.addEventListener("click", function () {
            var appList = document.getElementById('app1List');

            if (appList.style.display === 'none') {
                fetch('/get-apps')
                    .then(response => response.json())
                    .then(data => {
                        appList.innerHTML = data.applications.map(app => `<div style="border: 1px solid; width: 550px; height: 15;"> <a href="#" style="font-size: 10px; margin-left: 10px;">${app}</a> </div>`).join('');
                        appList.style.display = 'block';
                        a = 10;
                    })
                    .catch(error => console.error('Error fetching applications:', error));
            } else {
                appList.style.display = 'none';
            }
        });

        document.getElementById('app1List').addEventListener('click', function (event) {
        if(a==5){
            if (event.target.tagName === 'A') {
                var selectedApp = event.target.textContent;
                option5.textContent = selectedApp;
                document.getElementById('app1List').style.display = 'none';
            }
        }
        else if(a==6){
            if (event.target.tagName === 'A') {
                var selectedApp = event.target.textContent;
                option6.textContent = selectedApp;
                document.getElementById('app1List').style.display = 'none';
            }
        }
        else if(a==7){
            if (event.target.tagName === 'A') {
                var selectedApp = event.target.textContent;
                option7.textContent = selectedApp;
                document.getElementById('app1List').style.display = 'none';
            }
        }
        else if(a==8){
            if (event.target.tagName === 'A') {
                var selectedApp = event.target.textContent;
                option8.textContent = selectedApp;
                document.getElementById('app1List').style.display = 'none';
            }
        }
        else if(a==9){
            if (event.target.tagName === 'A') {
                var selectedApp = event.target.textContent;
                option9.textContent = selectedApp;
                document.getElementById('app1List').style.display = 'none';
            }
        }
        else if(a==10){
            if (event.target.tagName === 'A') {
                var selectedApp = event.target.textContent;
                option10.textContent = selectedApp;
                document.getElementById('app1List').style.display = 'none';
            }
        }
        });

        function clic(id){
                var butt = document.getElementById(id);
                var selectedApp = butt.textContent;

                if(selectedApp == 'Volume down'){
                    fetch('/volume-down')
                    .then(response => response.json())
                    .then(data => {
                    if (data.success) {
                        console.log(`Volume lowered to: ${data.volume}`);
                    } else {
                        console.error('Failed to lower volume.');
                    }
                    })
                    .catch(error => console.error('Error lowering volume:', error));
                }

                else if(selectedApp == 'Volume up'){
                    fetch('/volume-up')
                    .then(response => response.json())
                    .then(data => {
                    if (data.success) {
                        console.log(`Volume upper to: ${data.volume}`);
                    } else {
                        console.error('Failed to upper volume.');
                    }
                    })
                    .catch(error => console.error('Error uppering volume:', error));
                }

                else if(selectedApp == 'brightness down'){
                    fetch('/brightness-down')
                    .then(response => response.json())
                    .then(data => {
                    if (data.success) {
                        console.log(`Brightness lowered to: ${data.brightness}`);
                    } else {
                        console.error('Failed to lower brightness.');
                    }
                    })
                    .catch(error => console.error('Error lowering brightness:', error));
                }

                else if(selectedApp == 'brightness up'){
                    fetch('/brightness-up')
                    .then(response => response.json())
                    .then(data => {
                    if (data.success) {
                        console.log(`Brightness uppered to: ${data.brightness}`);
                    } else {
                        console.error('Failed to upper brightness.');
                    }
                    })
                    .catch(error => console.error('Error uppering brightness:', error));
                }

                else if (selectedApp) {
                    fetch(`/open-app/${encodeURIComponent(selectedApp)}`)
                        .then(response => response.json())
                        .then(data => {
                            if (data.success) {
                                console.log('Application opened successfully.');
                            } else {
                                console.error('Failed to open application.');
                            }
                        })
                        .catch(error => console.error('Error opening application:', error));
                }
        }
        /*
        option4.addEventListener("click", function () {
            fetch('/volume-down')
                .then(response => response.json())
                .then(data => {
                if (data.success) {
                    console.log(`Volume lowered to: ${data.volume}`);
                } else {
                    console.error('Failed to lower volume.');
                }
                })
                .catch(error => console.error('Error lowering volume:', error));
        });*/
    </script>
</body>
</html>